(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{110:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(10),s=n.n(r),i=n(25),o=n(12),l=n(18),j=n.n(l),b=n(26),u=n(17),d=n(159),O=n(32),p=n(154),h=n(156),x=n(114),m=n(54),g=n(158),f=n(2),v=Object(p.a)((function(e){return{grid:{marginTop:e.spacing(1)},paper:{whiteSpace:"unset",wordBreak:"break-all",padding:e.spacing(2)},button:Object(O.a)({width:"8rem",marginTop:e.spacing(1)},e.breakpoints.down("md"),{width:"100%"}),index:{display:"flex",alignItems:"center"},rowLayout:{flexDirection:"column"}}}));function k(e){var t=e.links,n=v();return t.length?(console.log(t),Object(f.jsx)(h.a,{container:!0,spacing:2,className:n.grid,children:t.map((function(e,t){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(h.a,{item:!0,xs:12,md:12,children:Object(f.jsx)(x.a,{elevation:3,className:n.paper,children:Object(f.jsxs)(h.a,{container:!0,spacing:2,children:[Object(f.jsx)(h.a,{item:!0,className:n.index,display:"flex",children:Object(f.jsxs)("span",{children:["#",t+1]})}),Object(f.jsxs)(h.a,{item:!0,className:n.rowLayout,xs:!0,container:!0,direction:"column",children:[Object(f.jsx)(h.a,{item:!0,xs:!0,children:Object(f.jsx)(m.a,{children:e.from})}),Object(f.jsx)(h.a,{className:n.button,item:!0,children:Object(f.jsx)(g.a,{className:n.button,variant:"contained",color:"secondary",component:i.b,to:"/detail/".concat(e._id),children:"Open"})})]})]})})},e._id)})}))})):Object(f.jsx)("p",{children:"No links"})}var w=Object(a.createContext)({token:null,userId:null,login:void 0,logout:void 0,isAuthenticated:!1}),y=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),s=Object(u.a)(r,2),i=s[0],o=s[1];return{loading:n,request:Object(a.useCallback)(function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,r,s,i,l=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",a=l.length>2&&void 0!==l[2]?l[2]:null,r=l.length>3&&void 0!==l[3]?l[3]:{},c(!0),e.prev=4,a&&(a=JSON.stringify(a),r["Content-Type"]="application/json"),e.next=8,fetch(t,{method:n,body:a,headers:r});case 8:return s=e.sent,e.next=11,s.json();case 11:if(i=e.sent,s.ok){e.next=14;break}throw new Error(i.message||"Something went wrong");case 14:return c(!1),e.abrupt("return",i);case 18:throw e.prev=18,e.t0=e.catch(4),c(!1),o(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:i,clearError:Object(a.useCallback)((function(){return o(null)}),[])}},C=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],r=y(),s=r.loading,i=r.request,o=Object(a.useContext)(w).token,l=Object(a.useCallback)(Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i("api/link","GET",null,{Authorization:"Bearer ".concat(o)});case 3:t=e.sent,c(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[o,i]);return Object(a.useEffect)((function(){l()}),[l]),s?Object(f.jsx)(d.a,{}):Object(f.jsx)("div",{children:!s&&Object(f.jsx)(k,{links:n})})},S=n(176),N=n(177),P=Object(p.a)((function(e){return{root:{display:"flex"}}})),B=function(){var e=P(),t=Object(o.g)(),n=Object(a.useContext)(w),c=y().request,r=Object(a.useState)(""),s=Object(u.a)(r,2),i=s[0],l=s[1],d=function(){var e=Object(b.a)(j.a.mark((function e(a){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!=a.charCode){e.next=13;break}return e.prev=1,console.log("Token",n.token),e.next=5,c("/api/link/generate","POST",{from:i},{Authorization:"Bearer ".concat(n.token)});case 5:r=e.sent,t.push("/detail/".concat(r.link._id)),console.log("Data",r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),alert(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{children:Object(f.jsxs)(S.a,{children:[Object(f.jsx)(N.a,{value:i,onChange:function(e){l(e.target.value)},onKeyPress:d,type:"text",id:"link",name:"link",className:e.textField,label:"Enter url"}),Object(f.jsx)(g.a,{onClick:d,className:e.button,color:"secondary",children:"Sign up"})]})})},T=n(163),I=n(164),E=Object(p.a)((function(e){return{paper:{padding:e.spacing(3),marginTop:e.spacing(2),whiteSpace:"unset",wordBreak:"break-all"},title:{paddingBottom:e.spacing(1)},linkTo:{marginTop:e.spacing(2)},p:{fontSize:"1.15em",marginTop:e.spacing(1),marginBottom:e.spacing(1)},leftSpacing:{marginLeft:e.spacing(.4)}}}));function D(e){var t=e.link,n=E();return Object(f.jsx)("div",{children:Object(f.jsx)(h.a,{container:!0,justifyContent:"center",alignItems:"center",children:Object(f.jsx)(h.a,{item:!0,md:12,xs:12,children:Object(f.jsx)(S.a,{my:2,children:Object(f.jsxs)(x.a,{elevation:3,className:n.paper,children:[Object(f.jsx)(m.a,{className:n.title,variant:"h4",children:"Generated link "}),Object(f.jsx)(T.a,{}),Object(f.jsx)(m.a,{className:n.linkTo,variant:"h5",children:Object(f.jsx)(I.a,{href:t.to,target:"_blank",rel:"noopener noreferrer",underline:"hover",children:t.to})}),Object(f.jsxs)("div",{className:n.p,children:["From:",Object(f.jsx)(I.a,{className:n.leftSpacing,href:t.from,target:"_blank",rel:"noopener noreferrer",underline:"hover",children:t.from})]}),Object(f.jsxs)("p",{className:n.p,children:["Clicks count:",Object(f.jsx)("strong",{className:n.leftSpacing,children:t.clicks})]}),Object(f.jsxs)("p",{className:n.p,children:["Date of creation:",Object(f.jsx)("strong",{className:n.leftSpacing,children:new Date(t.date).toLocaleDateString()})]})]})})})})})}var F=function(){var e=Object(a.useContext)(w).token,t=y(),n=t.request,c=t.loading,r=Object(a.useState)(null),s=Object(u.a)(r,2),i=s[0],l=s[1],O=Object(o.h)().id,p=Object(a.useCallback)(Object(b.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("/api/link/".concat(O),"GET",null,{Authorization:"Bearer ".concat(e)});case 3:a=t.sent,l(a),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])}))),[e,O,n]);return Object(a.useEffect)((function(){p()}),[p]),c?Object(f.jsx)(d.a,{}):Object(f.jsx)(f.Fragment,{children:!c&&i&&Object(f.jsx)(D,{link:i})})},A=n(47),L=n(161),q=n(181),G=n(160),J=n(165),_=n(166),z=n(167),M=n(168),H=n(58),K=(n(108),Object(p.a)((function(e){return{textField:{width:"75%",marginBottom:e.spacing(1)},button:{width:"75%",height:"2.5rem",marginBottom:e.spacing(.5)}}}))),R=function(){var e=K(),t=Object(a.useContext)(w),n=Object(a.useCallback)((function(e,t){if(e)switch(t){case"error":H.b.error("\ud83e\udd84 ".concat(e),{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});break;case"":break;default:Object(H.b)("\ud83e\udd84 ".concat(e),{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}}),[]),c=y(),r=c.loading,s=c.error,i=c.clearError,o=c.request,l=Object(a.useState)({email:"",password:"",showPassword:!1}),d=Object(u.a)(l,2),p=d[0],v=d[1];Object(a.useEffect)((function(){n(s,"error"),i()}),[s,n,i]);var k=function(e){v(Object(A.a)(Object(A.a)({},p),{},Object(O.a)({},e.target.name,e.target.value)))},C=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o("/api/auth/register","POST",Object(A.a)({},p));case 3:t=e.sent,n(t.message),console.log("Data",t),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o("/api/auth/login","POST",Object(A.a)({},p));case 3:n=e.sent,t.login(n.token,n.userId),console.log("Data",n),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{children:Object(f.jsx)(h.a,{container:!0,justifyContent:"center",alignItems:"center",children:Object(f.jsxs)(h.a,{item:!0,xs:12,md:6,children:[Object(f.jsx)(S.a,{my:2,children:Object(f.jsx)(m.a,{align:"center",p:3,variant:"h4",children:"Short your link"})}),Object(f.jsx)(x.a,{elevation:2,children:Object(f.jsxs)(S.a,{p:3,pb:6,textAlign:"center",children:[Object(f.jsx)(N.a,{value:p.email,onChange:k,type:"email",id:"email",name:"email",className:e.textField,label:"Email"}),Object(f.jsxs)(L.a,{className:e.textField,children:[Object(f.jsx)(q.a,{htmlFor:"password",children:"Password"}),Object(f.jsx)(G.a,{id:"password",name:"password",type:p.showPassword?"text":"password",onChange:k,value:p.password,endAdornment:Object(f.jsx)(J.a,{position:"end",children:Object(f.jsx)(_.a,{"aria-label":"toggle password visibility",onClick:function(){v(Object(A.a)(Object(A.a)({},p),{},{showPassword:!p.showPassword}))},onMouseDown:function(e){e.preventDefault()},children:p.showPassword?Object(f.jsx)(z.a,{}):Object(f.jsx)(M.a,{})})})})]}),Object(f.jsxs)(S.a,{mt:3,children:[Object(f.jsx)(g.a,{onClick:P,className:e.button,variant:"contained",color:"primary",disabled:r,children:"Log in"}),Object(f.jsx)(g.a,{onClick:C,disabled:r,className:e.button,color:"secondary",children:"Sign up"})]})]})})]})})})},U=n(175),W="userData";var Q=n(173),V=n(172),X=n(180),Y=n(179),Z=n(162),$=n(169),ee=n(170),te=n(171),ne=n(85),ae=n.n(ne),ce=n(174),re=n(14),se=n(82),ie=n.n(se),oe=n(83),le=n.n(oe),je=n(84),be=n.n(je),ue=240,de=Object(p.a)((function(e){return{root:{display:"flex"},drawer:Object(O.a)({},e.breakpoints.up("sm"),{width:ue,flexShrink:0}),appBar:Object(O.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(ue,"px)"),marginLeft:ue}),menuButton:Object(O.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:ue},content:{flexGrow:1,padding:e.spacing(1)},page:{windht:"100%"}}}));var Oe=function(e){var t=e.window,n=de(),r=Object(re.a)(),s=c.a.useState(!1),l=Object(u.a)(s,2),j=l[0],b=l[1],d=Object(o.g)(),O=Object(a.useContext)(w),p=e.isAuthenticated,h=function(){b(!j)},x=function(){b(!1)},g=Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:n.toolbar}),Object(f.jsx)(T.a,{}),Object(f.jsxs)(Z.a,{children:[Object(f.jsxs)($.a,{button:!0,component:i.c,to:"/create",onClick:x,children:[Object(f.jsx)(ee.a,{children:Object(f.jsx)(ie.a,{})}),Object(f.jsx)(te.a,{primary:"Create"})]}),Object(f.jsxs)($.a,{button:!0,component:i.c,to:"/links",onClick:x,children:[Object(f.jsx)(ee.a,{children:Object(f.jsx)(le.a,{})}),Object(f.jsx)(te.a,{primary:"Links"})]})]}),Object(f.jsx)(T.a,{}),Object(f.jsx)(Z.a,{children:Object(f.jsxs)($.a,{button:!0,to:"/",onClick:function(e){e.preventDefault(),O.logout(),d.push("/")},children:[Object(f.jsx)(ee.a,{children:Object(f.jsx)(be.a,{})}),Object(f.jsx)(te.a,{primary:"Logout"})]})})]}),v=void 0!==t?function(){return t().document.body}:void 0;return p?Object(f.jsxs)("div",{className:n.root,children:[Object(f.jsx)(V.a,{}),Object(f.jsx)(Q.a,{position:"fixed",className:n.appBar,children:Object(f.jsxs)(ce.a,{children:[Object(f.jsx)(_.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:h,className:n.menuButton,children:Object(f.jsx)(ae.a,{})}),Object(f.jsx)(m.a,{variant:"h6",noWrap:!0,children:"Short your link"})]})}),Object(f.jsxs)("nav",{className:n.drawer,"aria-label":"mailbox folders",children:[Object(f.jsx)(Y.a,{smUp:!0,implementation:"css",children:Object(f.jsx)(X.a,{container:v,variant:"temporary",anchor:"rtl"===r.direction?"right":"left",open:j,onClose:h,classes:{paper:n.drawerPaper},ModalProps:{keepMounted:!0},children:g})}),Object(f.jsx)(Y.a,{xsDown:!0,implementation:"css",children:Object(f.jsx)(X.a,{classes:{paper:n.drawerPaper},variant:"permanent",open:!0,children:g})})]}),Object(f.jsxs)("main",{className:n.content,children:[Object(f.jsx)("div",{className:n.toolbar}),e.children]})]}):Object(f.jsx)(f.Fragment,{children:e.children})};var pe=function(){var e=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(u.a)(r,2),i=s[0],o=s[1],l=Object(a.useState)(null),j=Object(u.a)(l,2),b=j[0],d=j[1],O=Object(a.useCallback)((function(e,t){c(e),d(t),localStorage.setItem(W,JSON.stringify({userId:t,token:e}))}),[]),p=Object(a.useCallback)((function(){c(null),d(null),localStorage.removeItem(W)}),[]);return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem(W));e&&e.token&&O(e.token,e.userId),o(!0)}),[O]),{login:O,logout:p,token:n,userId:b,ready:i}}(),t=e.token,n=e.login,c=e.logout,r=e.userId,s=e.ready,l=!!t,j=function(e){return e?Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{path:"/links",exact:!0,children:Object(f.jsx)(C,{})}),Object(f.jsx)(o.b,{path:"/create",exact:!0,children:Object(f.jsx)(B,{})}),Object(f.jsx)(o.b,{path:"/detail/:id",children:Object(f.jsx)(F,{})}),Object(f.jsx)(o.a,{to:"create"})]}):Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{path:"/",exact:!0,children:Object(f.jsx)(R,{})}),Object(f.jsx)(o.a,{to:"/"})]})}(l);return s?Object(f.jsx)(w.Provider,{value:{token:t,login:n,logout:c,userId:r,isAuthenticated:l},children:Object(f.jsxs)(i.a,{children:[Object(f.jsx)(Oe,{isAuthenticated:l,children:Object(f.jsx)(U.a,{children:j})}),Object(f.jsx)(H.a,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}):Object(f.jsx)(d.a,{})};n(110);s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(pe,{})}),document.getElementById("root"))}},[[111,1,2]]]);
//# sourceMappingURL=main.c3235dfa.chunk.js.map